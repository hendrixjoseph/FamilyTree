<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia Site Renderer 1.6 at 2015-09-20 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Family Tree &#x2013; your oracle sql magic</title>
    <style type="text/css" media="all">
      @import url("../../css/maven-base.css");
      @import url("../../css/maven-theme.css");
      @import url("../../css/site.css");
    </style>
    <link rel="stylesheet" href="../../css/print.css" type="text/css" media="print" />
      <meta name="author" content="Joseph Hendrix" />
    <meta name="Date-Creation-yyyymmdd" content="20150706" />
    <meta name="Date-Revision-yyyymmdd" content="20150920" />
    <meta http-equiv="Content-Language" content="en" />
        
        </head>
  <body class="composite">
    <div id="banner">
                    <div id="bannerLeft">
                Family Tree
                </div>
                    <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
                    
                <div class="xleft">
        <span id="publishDate">Last Published: 2015-09-20</span>
                  &nbsp;| <span id="projectVersion">Version: 2.0</span>
                      </div>
            <div class="xright">        
                    
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
                    
                                <h5>Project Documentation</h5>
                  <ul>
                                                                                                                                                                                                  <li class="collapsed">
                          <a href="../../project-info.html" title="Project Information">Project Information</a>
                  </li>
                                                                    <li class="collapsed">
                          <a href="../../project-reports.html" title="Project Reports">Project Reports</a>
                  </li>
          </ul>
                       <h5>Other Documentation</h5>
                  <ul>
                  <li class="none">
                          <a href="../../documentation/schema.html" title="Schema">Schema</a>
            </li>
                  <li class="none">
                          <a href="../../documentation/screenshots.html" title="Screenshots">Screenshots</a>
            </li>
                                                                                                                                      <li class="expanded">
                          <a href="../../" title="CS7700 Documents">CS7700 Documents</a>
                    <ul>
                      <li class="none">
                          <a href="../../documentation/cs7700/Hendrix_CS7700_Final_Report.docx" title="Final Report">Final Report</a>
            </li>
                      <li class="none">
                          <a href="../../documentation/cs7700/Hendrix_CS7700_Project_Presentation.pptx" title="Project Presentation">Project Presentation</a>
            </li>
                      <li class="none">
                          <a href="../../documentation/cs7700/ Hendrix_CS7700_Project_Proposal.docx" title="Project Proposal">Project Proposal</a>
            </li>
                      <li class="none">
                          <a href="../../documentation/cs7700/Hendrix_CS7700_User_Manual.docx" title="User Manual">User Manual</a>
            </li>
                      <li class="none">
                          <a href="../../documentation/cs7700/informal_proposal.html" title="Informal Proposal">Informal Proposal</a>
            </li>
              </ul>
        </li>
                                                                                                            <li class="expanded">
                          <a href="../../" title="Emails with Mike Owens">Emails with Mike Owens</a>
                    <ul>
                      <li class="none">
                          <a href="../../documentation/Mike_Owens/something_beautiful_i_wrote_last_night.html" title="something beautiful i wrote last night">something beautiful i wrote last night</a>
            </li>
                      <li class="none">
                          <a href="../../documentation/Mike_Owens/too_many_joins.html" title="too many joins">too many joins</a>
            </li>
                      <li class="none">
            <strong>your oracle sql magic</strong>
          </li>
              </ul>
        </li>
          </ul>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="../../images/logos/maven-feather.png" />
      </a>
                   
                    
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <p>Bring you tables loaded on the NGC and we can look at it further.</p>
<p>From: Hendrix, Joseph D (TS) Sent: Monday, July 06, 2015 3:43 PM To: Owens, Michael (TS) Subject: RE: your oracle sql magic</p>
<p>Ok I think I misunderstood you when you asked &quot;So person, spouse, and sibling is all contain in the &quot;one&quot; person table&#x2026;. Is that correct?&quot;</p>
<p>The entries for person, spouse, and child exist in the PERSON table, but there is no foreign key or any column in the PERSON table that holds a value for spouse or child. You can only tell if a person is a spouse or child by referencing the MOTHER_OF and/&gt;or FATHER_OF tables.</p>
<p>The PERSON_VIEW view, however, has a MOTHER and FATHER column for each entry.</p>
<p>From: Owens, Michael (TS) Sent: Monday, July 06, 2015 3:30 PM To: Hendrix, Joseph D (TS) Subject: RE: your oracle sql magic</p>
<p>What about this:</p>
<div class="source">
<pre>  Select    a.id,
                a.person,
                b.spouse,
                c.child
  from      person a,
                person b,
                person c,
                father_of d,
                mother_of e,
                birth f,
                death g,
                gender h,
                place I,
  where   a.id=b.id(+)
  and        a.id=c.id(+)
  and        a.id=d.id(+)
  and        a.id=d.id(+)
  and        a.id=e.id(+)
  and        a.id=f.id(+)
  and        a.id=g.id(+)
  and        a.id=h.id(+)
  and        a.id=i.id(+)
</pre></div>
<p>From: Hendrix, Joseph D (TS) Sent: Monday, July 06, 2015 3:20 PM To: Owens, Michael (TS) Subject: RE: your oracle sql magic</p>
<p>Yes. Person, spouse, and child are all in the PERSON table.</p>
<p>From: Owens, Michael (TS) Sent: Monday, July 06, 2015 3:19 PM To: Hendrix, Joseph D (TS) Subject: RE: your oracle sql magic</p>
<p>So person, spouse, and sibling is all contain in the &quot;one&quot; person table&#x2026;. Is that correct?</p>
<p>From: Hendrix, Joseph D (TS) Sent: Monday, July 06, 2015 3:14 PM To: Owens, Michael (TS) Subject: RE: your oracle sql magic</p>
<ul>
<li>PERSON * FATHER_OF * MOTHER_OF * BIRTH * DEATH * GENDER * PLACE
<p>From: Owens, Michael (TS) Sent: Monday, July 06, 2015 3:13 PM To: Hendrix, Joseph D (TS) Subject: RE: your oracle sql magic</p>
<p>I think I know what mean/&gt;and want to do.</p>
<p>What the name of you tables being used:</p>
<p>From: Hendrix, Joseph D (TS) Sent: Monday, July 06, 2015 3:11 PM To: Owens, Michael (TS) Subject: RE: your oracle sql magic</p>
<p>Ok, I think I know what you mean.</p>
<p>I&#x2019;ll have to do that tonight and ask you again tomorrow.</p>
<p>From: Owens, Michael (TS) Sent: Monday, July 06, 2015 3:10 PM To: Hendrix, Joseph D (TS) Subject: RE: your oracle sql magic</p>
<p>There should be an easier way, put usually I export to spreadsheet.</p>
<p>From: Hendrix, Joseph D (TS) Sent: Monday, July 06, 2015 3:08 PM To: Owens, Michael (TS) Subject: RE: your oracle sql magic</p>
<p>It&#x2019;s all at home.</p>
<p>How do I do that, anyhow? (Preferable in sqldeveloper)</p>
<p>From: Owens, Michael (TS) Sent: Monday, July 06, 2015 3:08 PM To: Hendrix, Joseph D (TS) Subject: RE: your oracle sql magic</p>
<p>Can you give me a sample dump of the data including headings?</p>
<p>From: Hendrix, Joseph D (TS) Sent: Monday, July 06, 2015 3:05 PM To: Owens, Michael (TS) Subject: RE: your oracle sql magic</p>
<div class="source">
<pre>  CREATE TABLE &quot;JOE&quot;.&quot;PERSON&quot;
  ( &quot;ID&quot; NUMBER DEFAULT NULL,
  &quot;NAME&quot; VARCHAR2(100),
  &quot;GENDER&quot; CHAR(1)
  ) ;

  ALTER TABLE &quot;JOE&quot;.&quot;PERSON&quot; MODIFY (&quot;GENDER&quot; NOT NULL ENABLE);
  ALTER TABLE &quot;JOE&quot;.&quot;PERSON&quot; ADD CONSTRAINT &quot;PERSON_PK&quot; PRIMARY KEY (&quot;ID&quot;) ENABLE;
  ALTER TABLE &quot;JOE&quot;.&quot;PERSON&quot; MODIFY (&quot;NAME&quot; NOT NULL ENABLE);
  ALTER TABLE &quot;JOE&quot;.&quot;PERSON&quot; MODIFY (&quot;ID&quot; NOT NULL ENABLE);

  CREATE UNIQUE INDEX &quot;JOE&quot;.&quot;PERSON_PK&quot; ON &quot;JOE&quot;.&quot;PERSON&quot; (&quot;ID&quot;);

  ALTER TABLE &quot;JOE&quot;.&quot;PERSON&quot; ADD CONSTRAINT &quot;PERSON_GENDER_FK&quot; FOREIGN KEY (&quot;GENDER&quot;)
  REFERENCES &quot;JOE&quot;.&quot;GENDER&quot; (&quot;ABBR&quot;) ENABLE;

  REM INSERTING into JOE.PERSON
  SET DEFINE OFF;
  Insert into JOE.PERSON (ID,NAME,GENDER) values (1,'William Zenos Thoroman','M');
  Insert into JOE.PERSON (ID,NAME,GENDER) values (2,'Samuel Thoroman','M');
  Insert into JOE.PERSON (ID,NAME,GENDER) values (3,'Cynthiann McDonald Reynolds','F');
</pre></div>
<p>From: Owens, Michael (TS) Sent: Monday, July 06, 2015 3:01 PM To: Hendrix, Joseph D (TS) Subject: RE: your oracle sql magic</p>
<p>Can you send me a sample of your person table</p>
<p>From: Hendrix, Joseph D (TS) Sent: Monday, July 06, 2015 2:25 PM To: Owens, Michael (TS) Subject: RE: your oracle sql magic</p>
<p>This one:</p>
<div class="source">
<pre>  SELECT
  P.ID,
--P.NAME,
  SPOUSE.ID AS SPOUSE_ID,
  SPOUSE.NAME AS SPOUSE,
  CHILD.ID AS CHILD_ID,
  CHILD.NAME AS CHILD
  FROM
  PERSON_VIEW CHILD
  INNER JOIN
  PERSON_VIEW P
  ON
  CHILD.FATHER_ID = P.ID OR CHILD.MOTHER_ID = P.ID
  LEFT OUTER JOIN
  PERSON_VIEW SPOUSE
  ON
  (CHILD.FATHER_ID = SPOUSE.ID OR CHILD.MOTHER_ID = SPOUSE.ID) AND
  P.ID &lt; SPOUSE.ID
  ORDER BY
  P.NAME, SPOUSE.NAME;
</pre></div>
<p>Gives me exactly what I need. It&#x2019;s just ugly.</p>
<p>From: Owens, Michael (TS) Sent: Monday, July 06, 2015 2:23 PM To: Hendrix, Joseph D (TS) Subject: RE: your oracle sql magic</p>
<p>So it never gives you an error it just does return the values/&gt;records you expecting.</p>
<p>From: Hendrix, Joseph D (TS) Sent: Monday, July 06, 2015 2:21 PM To: Owens, Michael (TS) Subject: RE: your oracle sql magic</p>
<p>Neither of these gives me an error. What I&#x2019;m doing is trying to make a view that looks something like this:</p>
<p>id | name | Spouse id | spouse | Child id | child ---- | ---- | ---- | ---- | ---- | ---- 1 | Jim Bob | 2 | Suzy | 3 | Fred 1 | Jim Bob | 2 | Suzy | 3 | Fred 2 | Suzy | 1 | Jim Bob | 3 | Fred 2 | Suzy | 1 | Jim Bob | 3 | Fred 3 | Fred | null | null | 4 | John</p>
<p>Which is a view of a person, their spouse (if applicable) and their child.</p>
<p>What didn&#x2019;t work when I was trying to use the (+) was something like this:</p>
<div class="source">
<pre>  SELECT 
    P.ID,
    P.NAME,
    SPOUSE.ID AS SPOUSE_ID,
    SPOUSE.NAME AS SPOUSE,
    CHILD.ID AS CHILD_ID,
    CHILD.NAME AS CHILD
  FROM 
    PERSON P,
    PERSON SPOUSE,
    PERSON CHILD,
    FATHER_OF,
    MOTHER_OF
  WHERE  
    (P.ID = FATHER_OF.FATHER_ID OR P.ID = MOTHER_OF.MOTHER_ID)
  AND (SPOUSE.ID = MOTHER_OF.MOTHER_ID OR SPOUSE.ID = FATHER_OF.FATHER_ID) (+)
  AND CHILD.ID = FATHER_OF.CHILD_ID
  AND CHILD.ID = MOTHER_OF.CHILD_ID
</pre></div>
<p>Although this is completely off of memory.</p>
<p>My schema currently looks like this:</p></li></ul>
<div class="section">
<h2><a name="aschema1https:cloud.githubusercontent.comassets127546778515562fac25c28-2372-11e5-8f71-6af8a93eaddd.jpg"></a>![schema1](https:/&gt;/&gt;cloud.githubusercontent.com/&gt;assets/&gt;12754677/&gt;8515562/&gt;fac25c28-2372-11e5-8f71-6af8a93eaddd.jpg)</h2>
<p>From: Owens, Michael (TS) Sent: Monday, July 06, 2015 2:12 PM To: Hendrix, Joseph D (TS) Subject: RE: your oracle sql magic</p>
<p>Does the sql statement give you an error. It&#x2019;s probably something to do with the &quot;or&quot; violates the join</p>
<p>In plain English what are you trying to do ?</p>
<p>Your selecting against a view to determine a person father, spouse, children &#x2013; where applicable???</p>
<p>From: Hendrix, Joseph D (TS) Sent: Monday, July 06, 2015 10:13 AM To: Owens, Michael (TS) Subject: your oracle sql magic</p>
<p>Mike,</p>
<p>I have a view /&gt; select statement:</p>
<div class="source">
<pre>  SELECT
  P.ID,
--P.NAME,
  SPOUSE.ID AS SPOUSE_ID,
  SPOUSE.NAME AS SPOUSE,
  CHILD.ID AS CHILD_ID,
  CHILD.NAME AS CHILD
  FROM
  PERSON_VIEW CHILD
  INNER JOIN
  PERSON_VIEW P
  ON
  CHILD.FATHER_ID = P.ID OR CHILD.MOTHER_ID = P.ID
  LEFT OUTER JOIN
  PERSON_VIEW SPOUSE
  ON
  (CHILD.FATHER_ID = SPOUSE.ID OR CHILD.MOTHER_ID = SPOUSE.ID) AND
  P.ID &lt; SPOUSE.ID
  ORDER BY
  P.NAME, SPOUSE.NAME;
</pre></div>
<p>Which isn&#x2019;t as pretty as using the (+) to designate a join. I couldn&#x2019;t get the (+) to work when using an &quot;OR&quot; so that&#x2019;s why it&#x2019;s not used here. Also, is it a bad idea to join views or to have views reference views?</p>
<p>Another way I tried to make this view work:</p>
<div class="source">
<pre>  SELECT 
    P.ID,
    P.NAME,
    SPOUSE.ID AS SPOUSE_ID,
    SPOUSE.NAME AS SPOUSE,
    CHILD.ID AS CHILD_ID,
    CHILD.NAME AS CHILD
  FROM 
    PERSON P,
    PERSON SPOUSE,
    PERSON CHILD,
    FATHER_OF,
    MOTHER_OF
  WHERE (   
    P.ID = FATHER_OF.FATHER_ID
  AND SPOUSE.ID = MOTHER_OF.MOTHER_ID
  AND CHILD.ID = FATHER_OF.CHILD_ID
  AND CHILD.ID = MOTHER_OF.CHILD_ID
  )
  OR
  (
    P.ID = MOTHER_OF.MOTHER_ID
  AND SPOUSE.ID = FATHER_OF.FATHER_ID
  AND CHILD.ID = FATHER_OF.CHILD_ID
  AND CHILD.ID = MOTHER_OF.CHILD_ID
  )
</pre></div>
<p>Which I don&#x2019;t think would work if there was no known spouse (mother or father)</p></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              <?xml version="1.0" encoding="UTF-8"?>
<footer>Copyright © 2015 Joseph Hendrix</footer>
            </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
